# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Login >> Login - Valid Input
- Location: C:\actions-runner\Automation\TraxionPay-V3\TraxionPay-V3\Main\Functional_Test\TPayWeb_V3\1_Login.spec.ts:49:7

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: getByText('Overview')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for getByText('Overview')

    at C:\actions-runner\Automation\TraxionPay-V3\TraxionPay-V3\Main\Functional_Test\TPayWeb_V3\1_Login.spec.ts:74:46
```

# Page snapshot

```yaml
- complementary:
  - heading "TraxionPay" [level=1]:
    - link "TraxionPay":
      - img "TraxionPay"
  - list:
    - listitem:
      - link "Dashboard":
        - img
        - text: Dashboard
    - listitem:
      - link "Cash-Ins":
        - img
        - text: Cash-Ins
    - listitem:
      - link "Cash-Outs":
        - img
        - text: Cash-Outs
    - listitem:
      - link "Transactions":
        - img
        - text: Transactions
    - listitem:
      - link "My Link":
        - img
        - text: My Link
- banner:
  - link "Show notifications":
    - img
  - link "Open user menu": Vincent Salanga Merchant Admin
  - img
  - textbox "Search in website"
- text: Overview
- heading "Dashboard" [level=2]
- 'link "Account: 1011-3309-9241-9120"':
  - text: "Account:"
  - strong: 1011-3309-9241-9120
- 'link "Current: PHP 97,871.10"':
  - text: "Current:"
  - strong: PHP 97,871.10
- 'link "Available: PHP 97,871.10"':
  - text: "Available:"
  - strong: PHP 97,871.10
- text: PayIns
- link "Today"
- text: "0"
- img
- text: PayOuts
- link "Today"
- text: "0"
- img
- text: Clients
- link "Today"
- text: "0"
- img
- text: Users
- link "Today"
- text: "0"
- img
- img
- text: 0 eWallet Transactions 0 Total To Date
- img
- text: 0 Card Transactions 0 Total To Date
- img
- text: 0 Online Banking Transactions 0 Total To Date
- img
- text: 0 OTC Transactions 0 Total To Date
- heading "1011-3309-9241-9120" [level=1]
- img
- text: +639981791200 ·
- img
- link "vasalanga+2@traxiontech.net"
- img "QR Code"
- heading "Transactions (last 30 days)" [level=3]
- img: 2.0 1.6 1.2 0.8 0.4 0.0 2025-03-03 2025-03-04 2025-03-05 2025-03-06 2025-03-07 2025-03-08 2025-03-09 2025-03-10 2025-03-11 2025-03-12 2025-03-13 2025-03-14 2025-03-15 2025-03-16 2025-03-17 2025-03-18 2025-03-19 2025-03-20 2025-03-21 2025-03-22 2025-03-23 2025-03-24 2025-03-25 2025-03-26 2025-03-27 2025-03-28 2025-03-29 2025-03-30 2025-03-31 2025-04-01 2025-04-02 2025-04-03
- heading "Transactions List" [level=3]
- combobox:
  - option "Success" [selected]
  - option "Pending"
  - option "Failed"
- combobox "entries per page":
  - option "10" [selected]
  - option "25"
  - option "50"
  - option "100"
- text: "entries per page Search:"
- searchbox "Search:"
- table:
  - rowgroup:
    - row "Reference Number Creditor Account Debitor Account Transaction Code Total Amount Transaction Fee DateTime Created DateTime Completed Actions":
      - cell "Reference Number"
      - cell "Creditor Account"
      - cell "Debitor Account"
      - cell "Transaction Code"
      - cell "Total Amount"
      - cell "Transaction Fee"
      - cell "DateTime Created"
      - cell "DateTime Completed"
      - cell "Actions"
  - rowgroup:
    - row "No data available in table":
      - cell "No data available in table"
  - rowgroup
- status: Showing 0 to 0 of 0 entries
- navigation "pagination":
  - list:
    - listitem:
      - link "First" [disabled]: «
    - listitem:
      - link "Previous" [disabled]: ‹
    - listitem:
      - link "Next" [disabled]: ›
    - listitem:
      - link "Last" [disabled]: »
- contentinfo:
  - list:
    - listitem:
      - link "Documentation"
  - list:
    - listitem:
      - text: Copyright © 2025
      - link "Traxion Tech Inc."
      - text: . All rights reserved.
- img
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import userDetails from './userDetails.json'; 
   3 | import { allure } from 'allure-playwright';
   4 |
   5 | function getRandomCorrectUser() {
   6 |   const correctUsers = userDetails.correctUsers;
   7 |   const randomIndex = Math.floor(Math.random() * correctUsers.length);
   8 |   return correctUsers[randomIndex];
   9 | }
   10 |
   11 | function getRandomIncorrectUser() {
   12 |   const incorrectUsers = userDetails.incorrectUsers;
   13 |   const randomIndex = Math.floor(Math.random() * incorrectUsers.length);
   14 |   return incorrectUsers[randomIndex];
   15 | }
   16 |
   17 | function generateUniqueEmail() {
   18 |   const timestamp = Date.now();
   19 |   return `user${timestamp}@example.com`;
   20 | }
   21 |
   22 | function generateUniqueMobile() {
   23 |   const randomDigits = Math.floor(1000000000 + Math.random() * 9000000000);
   24 |   return `9${randomDigits}`;
   25 | } 
   26 |
   27 | function getRandomPassword() {
   28 |   const passwords = [
   29 |     'short', // Less than 8 characters
   30 |     'longenoughpassword' // 8 or more characters
   31 |   ];
   32 |   const randomIndex = Math.floor(Math.random() * passwords.length);
   33 |   return passwords[randomIndex];
   34 | }
   35 |
   36 | test.afterEach(async ({ page }) => {
   37 |   if (test.info().status !== "passed") { // Only take a screenshot when the test actually fails
   38 |     const screenshotPath = `screenshots/${test.info().title}.png`;
   39 |     await page.screenshot({ path: screenshotPath, fullPage: true });
   40 |     test.info().attachments.push({
   41 |       name: 'Screenshot',
   42 |       path: screenshotPath,
   43 |       contentType: 'image/png'
   44 |     });
   45 |   }
   46 | });
   47 |
   48 | test.describe('Login', () => {
   49 |   test('Login - Valid Input', async ({ page }) => {
   50 |     const correctUser = getRandomCorrectUser();
   51 |
   52 |     await page.route('https://merchant-sit.traxionpay.com/', route => {
   53 |       route.fulfill({
   54 |         status: 200,
   55 |         contentType: 'application/json',
   56 |         body: JSON.stringify({ success: true })
   57 |       });
   58 |     });
   59 |
   60 |     await page.goto('https://merchant-sit.traxionpay.com/signin');
   61 |
   62 |     await page.getByPlaceholder('your@email.com').fill(correctUser.email);
   63 |     await page.getByPlaceholder('your password').fill(correctUser.password);
   64 |
   65 |     // Add on this part the API validation
   66 |     const [response] = await Promise.all([
   67 |       page.waitForResponse(response => response.url().includes('https://merchant-sit.traxionpay.com/') && response.status() === 200),
   68 |       page.getByRole('button', { name: 'Sign in' }).click()
   69 |     ]);
   70 |     expect(response.status()).toBe(200);
   71 |
   72 |     // Verification
   73 |     await expect(page).toHaveURL('https://merchant-sit.traxionpay.com');
>  74 |     await expect(page.getByText('Overview')).toBeVisible();
      |                                              ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
   75 |     await expect(page.getByRole('heading', { name: 'Dashboard' })).toBeVisible();
   76 |   });
   77 |
   78 |   
   79 |   test.skip('Login - Show Password & Remember Me Functionality', async ({ page }) => {
   80 |     const correctUser = getRandomCorrectUser();
   81 |
   82 |     await page.goto('https://merchant-sit.traxionpay.com/signin');
   83 |
   84 |     await page.getByPlaceholder('your@email.com').fill(correctUser.email);
   85 |     await page.getByPlaceholder('your password').fill(correctUser.password);
   86 |
   87 |     await page.getByLabel('Show password').click();
   88 |     const passwordInput = await page.getByPlaceholder('your password');
   89 |     await expect(passwordInput).toHaveAttribute('type', 'text');
   90 |     
   91 |     await page.getByLabel('Remember me on this device').check();
   92 |     await expect(page.getByLabel('Remember me on this device')).toBeChecked();
   93 |     await page.getByRole('button', { name: 'Sign in' }).click();
   94 |
   95 |     await expect(page).toHaveURL('https://merchant-sit.traxionpay.com');
   96 |     await expect(page.getByText('Overview')).toBeVisible();
   97 |     await expect(page.getByRole('heading', { name: 'Dashboard' })).toBeVisible();
   98 |
   99 |     // Log out
  100 |     await page.getByLabel('Open user menu').click();
  101 |     await page.getByRole('link', { name: 'Signout' }).click();
  102 |
  103 |     // Navigate back to the login page
  104 |     await page.goto('https://merchant-sit.traxionpay.com/signin');
  105 |
  106 |     // Verify that the email and password are saved
  107 |     await expect(page.getByPlaceholder('your@email.com')).toHaveValue(correctUser.email);
  108 |     await expect(page.getByPlaceholder('your password')).toHaveValue(correctUser.password);
  109 |     // Verify that the "Remember me" checkbox is checked
  110 |     await expect(page.getByLabel('Remember me on this device')).toBeChecked();
  111 |
  112 |   });
  113 | });
  114 |
  115 | test.describe('Sign Up', () => {
  116 |   test('Sign Up - Success', async ({ page }) => {
  117 |     const uniqueEmail = generateUniqueEmail();
  118 |     const uniqueMobile = generateUniqueMobile();
  119 |
  120 |     await page.goto('https://merchant-sit.traxionpay.com/signin');
  121 |     await page.getByRole('link', { name: 'Sign up' }).click();
  122 |
  123 |     await expect(page).toHaveURL('https://merchant-sit.traxionpay.com/signup');
  124 |     await expect(page.getByText('Email address')).toBeVisible();
  125 |     await page.getByPlaceholder('your@email.com').fill(uniqueEmail);
  126 |     await expect(page.getByText('Mobile Number')).toBeVisible();
  127 |     await page.getByRole('textbox', { name: 'Mobile Number' }).fill(uniqueMobile);
  128 |     await page.getByRole('button', { name: 'Sign Up' }).click();
  129 |     
  130 |     await page.getByText('Enter the OTP we sent to your mobile number.').isVisible();
  131 |   });
  132 | });
  133 |
  134 | test.describe('Forgot Password', () => {
  135 |   test.skip('Forgot Password - Valid', async ({ page }) => {
  136 |     const correctUser = getRandomCorrectUser();
  137 |     
  138 |     await page.goto('https://merchant-sit.traxionpay.com/signin');
  139 |     await page.getByRole('link', { name: 'Forgot Password?' }).click();
  140 |     
  141 |     //verify test if visible
  142 |     await page.getByRole('heading', { name: 'Forgot Password' }).isVisible();
  143 |     await page.getByRole('textbox', { name: 'Email Address' }).isVisible();
  144 |     await page.getByRole('button', { name: 'Send Link' }).click();
  145 |
  146 |     //verification test the email reset is succesful
  147 |     await page.getByRole('textbox', { name: 'Email Address' }).fill(correctUser.email); 
  148 |     const [response] = await Promise.all([
  149 |         page.waitForResponse(response => response.url().includes('https://merchant-sit.traxionpay.com/signin/forgot-password') && response.status() === 200),
  150 |         page.getByRole('button', { name: 'Send Link' }).click()
  151 |     ]);
  152 |
  153 |     // Verify response status
  154 |     expect(response.status()).toBe(200);
  155 |     
  156 |   });
  157 | });
  158 |
  159 |
```